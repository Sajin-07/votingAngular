<div
  class="min-h-screen text-white p-6 md:p-12 flex flex-col font-inter"
  [style.background]="'radial-gradient(circle at center, #535056 0%, #25242D 70%)'"
>
  
  <div class="max-w-7xl mx-auto w-full flex flex-col h-full">
    
    <header class="flex flex-col md:flex-row justify-between items-center md:items-start mb-10 gap-6 mt-4">
      <div class="flex flex-col items-center md:items-start text-center md:text-left">
        <h1 class="uppercase text-2xl md:text-[28px] mb-4 font-bold tracking-tight">
          DATASOFT POPULARITY CONTEST
        </h1>
        <div class="flex flex-col sm:flex-row gap-2 md:gap-8 text-base md:text-[18px]">
          <p class="text-[#A1A1A1]">
            Vote Ends In
            <span class="ml-1 text-white font-inter font-bold">{{ timeLeft }}</span>
          </p>
          <p class="text-[#A1A1A1]">
            Date
            <span class="ml-1 text-white font-bold">15 December 2025</span>
          </p>
        </div>
      </div>

      <div class="flex items-center gap-4 mt-2 md:mt-0">
        <p class="text-base md:text-[18px] text-[#A1A1A1]">Powered by</p>
        <img [src]="logoImg" alt="DataSoft" class="h-8 md:h-10" />
      </div>
    </header>

    <div class="mb-6 hidden md:block w-full max-w-6xl mx-auto px-4">
      <div class="relative">
        <div class="absolute top-[52px] left-24 right-24 h-[4px] bg-white/60"></div>
        <div
          class="absolute top-[52px] left-24 h-[4px] bg-[#529F2D] transition-all duration-500"
          [style.width]="(activeIndex / (STEPS.length - 1)) * 85 + '%'"
        ></div>

        <div class="flex justify-between relative z-10">
          <div *ngFor="let step of STEPS" class="flex flex-col items-center gap-3 min-w-[140px]">
            <span
              class="text-[16px]"
              [class]="step.status !== 'pending' ? 'text-[#529F2D]' : 'text-[#707070]'"
            >
              Step {{ step.id }}
            </span>
            <div
              class="w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors duration-300"
              [class.bg-[#529F2D]]="step.status === 'completed'"
              [class.border-[#529F2D]]="step.status === 'completed'"
              [class.bg-white]="step.status === 'active'"
              [class.border-white]="step.status === 'active'"
              [class.bg-[#A1A1A1]]="step.status === 'pending'"
              [class.border-[#A1A1A1]]="step.status === 'pending'"
            >
              <lucide-icon *ngIf="step.status === 'completed'" [img]="icons.Check" class="w-6 h-6 text-white"></lucide-icon>
            </div>
            <span
              class="text-[14px] font-semibold"
              [class.text-[#529F2D]]="step.status === 'completed'"
              [class.text-white]="step.status === 'active'"
              [class.text-[#707070]]="step.status === 'pending'"
            >
              {{ step.label }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <div class="flex-1 grid grid-cols-1 md:grid-cols-12 gap-6 max-w-5xl mx-auto w-full mt-10 mb-10 font-inter">
        
        <div class="md:col-span-7 h-[312px] bg-[#2A2931] border border-[#3E3D45] rounded-xl p-8 relative flex flex-col justify-between">
            
            <div class="text-[16px] text-white leading-relaxed">
                <p>Dear Raisul Kabir,</p>
                <p>You have selected your candidate</p>
            </div>

            <div class="flex justify-between items-end mt-0 gap-4 mb-8">
                
                <div class="w-[150px] h-[150px] bg-gray-700 overflow-hidden border border-white/10 shadow-lg">
                   <img [src]="userProfileImg" alt="User" class="w-full h-full object-cover"/>
                </div>

                <div class="flex flex-col items-end gap-2">
                    <div class="text-right">
                        <h3 class="text-[18px] font-bold text-white">{{ selectedCandidate.name }}</h3>
                        <p class="text-[14px] text-[#A1A1A1]">{{ selectedCandidate.department }}</p>
                    </div>

                    <div class="w-[150px] h-[150px] overflow-hidden border border-[#529F2D] shadow-lg relative">
                        <img [src]="selectedCandidate.image" alt="Selected Candidate" class="w-full h-full object-cover"/>
                    </div>
                </div>
            </div>
        </div>

        <div class="md:col-span-5 h-[312px] rounded-xl bg-[#222126] flex flex-col items-center justify-center p-6 text-center transition-all duration-500 border"
             [class.border-[#529F2D]]="verificationStatus === 'success'"
             [class.border-[#333]]="verificationStatus !== 'success'"
        >
            
            <div class="relative">
                <lucide-icon 
                    [img]="icons.Fingerprint" 
                    class="w-[90px] h-[100px] transition-colors duration-500"
                    [class.text-[#529F2D]]="verificationStatus === 'success'"
                    [class.text-[#707070]]="verificationStatus !== 'success'"
                    [strokeWidth]="1.5"
                ></lucide-icon>

                <div *ngIf="verificationStatus === 'scanning'" 
                     class="absolute top-0 left-0 w-full h-1 bg-[#529F2D]/80 shadow-[0_0_15px_rgba(82,159,45,0.8)] animate-scan"
                ></div>
            </div>

            <div class="mt-8 h-6">
                <p *ngIf="verificationStatus === 'idle'" class="text-white/50 text-[16px]">
                    Please provide finger to cast your vote for this election
                </p>
                
                <p *ngIf="verificationStatus === 'scanning'" class="text-[#A1A1A1] animate-pulse">
                    Verifying Identity...
                </p>
                
                <p *ngIf="verificationStatus === 'success'" class="text-[#529F2D] text-[18px] font-medium animate-fade-in">
                    Finger Print Verified
                </p>
                
                <p *ngIf="verificationStatus === 'error'" class="text-red-500 text-[18px] font-medium">
                    Verification Failed
                </p>
            </div>

        </div>

    </div>

    <div class="flex flex-col-reverse md:flex-row justify-between max-w-5xl mx-auto w-full px-4 gap-4 mt-auto">
      
      <a routerLink="/step3" class="w-full md:w-[200px]">
        <button
          class="h-[60px] w-full uppercase font-semibold text-[18px] bg-gradient-to-r from-[#529F2D] to-[#1D3910] border-0 ring-0 outline-none shadow-md transition-all duration-200 hover:shadow-[0_8px_24px_rgba(82,159,45,0.45)] hover:from-[#5fb834] hover:to-[#234715] active:scale-95 cursor-pointer rounded-lg text-white"
        >
          Change Vote
        </button>
      </a>

      <button
        (click)="handleCastVote()"
        [disabled]="verificationStatus === 'scanning' || verificationStatus === 'success'"
        [class.opacity-70]="verificationStatus === 'scanning' || verificationStatus === 'success'"
        [class.cursor-not-allowed]="verificationStatus === 'scanning' || verificationStatus === 'success'"
        class="h-[60px] w-full md:w-[200px] uppercase font-semibold text-[18px] bg-gradient-to-r from-[#529F2D] to-[#1D3910] border-0 ring-0 outline-none shadow-md transition-all duration-200 hover:shadow-[0_8px_24px_rgba(82,159,45,0.45)] hover:from-[#5fb834] hover:to-[#234715] active:scale-95 cursor-pointer rounded-lg text-white"
      >
        {{ verificationStatus === "success" ? "Vote Cast" : (verificationStatus === "scanning" ? "Verifying..." : "Cast Vote") }}
      </button>

    </div>

  </div>
</div>