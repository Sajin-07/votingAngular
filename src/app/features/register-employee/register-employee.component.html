<div
  class="min-h-screen text-white p-6 flex flex-col justify-center font-inter"
  [style.background]="'radial-gradient(circle at center, #535056 0%, #25242D 70%)'"
>
  <div class="max-w-6xl mx-auto w-full">
    
    <main class="bg-[#00000054] rounded-xl border border-[#3E3D45] p-8 shadow-[0px_4px_4px_0px_#00000040] animate-in zoom-in-95 duration-700 delay-100">
      
      <div class="flex items-center gap-3 mb-6 text-white border-b border-white/5 pb-5">
        <lucide-icon [img]="icons.UserPlus" class="w-7 h-7 text-[#529F2D]" [strokeWidth]="1.5"></lucide-icon>
        <h1 class="text-2xl font-bold uppercase tracking-tight">Employee Registration</h1>
      </div>

      <div *ngIf="isLoading" 
           class="mb-6 p-4 rounded-lg font-medium text-sm flex items-center gap-2 bg-[#529F2D]/10 border border-[#529F2D] text-[#529F2D]">
           <lucide-icon [img]="icons.Loader2" class="w-5 h-5 animate-spin"></lucide-icon>
           <span>{{ message }}</span>
      </div>
      
      <div *ngIf="!isLoading && isError && message" class="mb-6 p-4 rounded-lg font-medium text-sm text-red-400 bg-red-500/10 border border-red-500/50">
        {{ message }}
      </div>

      <form (submit)="onSubmit()" class="space-y-8">
        
        <div class="space-y-3">
          <label class="text-[#A1A1A1] text-base font-semibold">Employee Photo <span class="text-red-500">*</span></label>
          <div class="flex flex-row items-center gap-6">
            <div class="relative w-28 h-28 shrink-0 rounded-xl border border-dashed border-[#3E3D45] flex items-center justify-center overflow-hidden bg-[#1D1C23] shadow-inner group">
              <div *ngIf="isImageLoading" class="absolute inset-0 bg-black/60 flex items-center justify-center z-10 backdrop-blur-sm">
                 <lucide-icon [img]="icons.Loader2" class="w-8 h-8 text-[#529F2D] animate-spin"></lucide-icon>
              </div>
              <img *ngIf="previewUrl; else placeholder" [src]="previewUrl" alt="Photo Preview" class="w-full h-full object-cover transition-opacity duration-300" />
              <ng-template #placeholder>
                 <lucide-icon [img]="icons.UserPlus" class="w-10 h-10 text-[#707070]" [strokeWidth]="1"></lucide-icon>
              </ng-template>
            </div>
            <div class="flex-1 w-full max-w-md">
              <input id="photoInput" type="file" name="photo" accept="image/jpeg, image/png, image/webp" (change)="onFileChange($event)"
                class="block w-full text-sm text-[#A1A1A1] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#529F2D]/10 file:text-[#529F2D] hover:file:bg-[#529F2D]/20 cursor-pointer focus:ring-0 outline-none"/>
              <p class="text-xs text-[#707070] mt-2">Required. Accepted: JPEG, PNG, WEBP. Max: 5MB</p>
            </div>
          </div>
        </div>

        <div class="space-y-3 bg-[#1D1C23] p-6 rounded-xl border border-[#3E3D45]">
          <label class="text-[#A1A1A1] text-base font-semibold flex items-center gap-2">
            <lucide-icon [img]="icons.Fingerprint" class="w-5 h-5 text-[#529F2D]"></lucide-icon>
            Fingerprint Registration <span class="text-red-500">*</span>
          </label>
          
          <div class="flex items-center gap-4">
            <button
              type="button"
              (click)="captureFingerprint()"
              [disabled]="isLoading || isFingerprintCaptured"
              class="px-6 py-3 bg-[#529F2D] hover:bg-[#62bf36] text-white font-semibold rounded-lg transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <lucide-icon [img]="icons.Fingerprint" class="w-5 h-5"></lucide-icon>
              <span *ngIf="!isFingerprintCaptured">Capture Fingerprint</span>
              <span *ngIf="isFingerprintCaptured">âœ“ Captured</span>
            </button>

            <div *ngIf="isFingerprintCaptured" class="flex items-center gap-3 text-sm animate-in fade-in slide-in-from-left-2">
              <div class="flex items-center gap-2 px-4 py-2 bg-[#529F2D]/10 border border-[#529F2D] rounded-lg">
                <lucide-icon [img]="icons.BadgeCheck" class="w-4 h-4 text-[#529F2D]"></lucide-icon>
                <span class="text-[#529F2D] font-medium">Quality: {{ fingerprintQuality }}</span>
              </div>
              <button type="button" (click)="resetFingerprint()" class="text-xs text-red-400 hover:text-red-300 underline">
                Rescan
              </button>
            </div>
          </div>

          <div class="flex items-start gap-2 text-xs text-[#707070] mt-3">
            <lucide-icon [img]="icons.Clock" class="w-4 h-4 mt-0.5 shrink-0 text-[#707070]"></lucide-icon>
            <p>
              Fingerprint buffer is valid for <strong>2 minutes</strong>. Please submit promptly.
            </p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
          
          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2">
              <lucide-icon [img]="icons.UserPlus" class="w-4 h-4 text-[#707070]"></lucide-icon> 
              Employee Name <span class="text-red-500">*</span>
            </label>
            <input type="text" name="name" [(ngModel)]="formData.name" placeholder="e.g., Raisul Kabir" required 
              class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg focus:border-[#529F2D] outline-none text-white transition-all"/>
          </div>

          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2">
              <lucide-icon [img]="icons.BadgeCheck" class="w-4 h-4 text-[#707070]"></lucide-icon> 
              Designation <span class="text-red-500">*</span>
            </label>
            <input type="text" name="designation" [(ngModel)]="formData.designation" placeholder="e.g., Senior Business Analyst" required 
              class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg focus:border-[#529F2D] outline-none text-white transition-all"/>
          </div>

          <div class="space-y-2 relative">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2">
              <lucide-icon [img]="icons.ShieldCheck" class="w-4 h-4 text-[#707070]"></lucide-icon> 
              DS ID <span class="text-red-500">*</span>
            </label>
            
            <div class="relative">
                <input
                  type="text"
                  name="employeeId"
                  [ngModel]="formData.employeeId"
                  (ngModelChange)="onIdInput($event)"
                  placeholder="DS00615 or INT12345"
                  required
                  maxlength="8"
                  class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg outline-none transition-all text-white uppercase pr-10"
                  [ngClass]="{
                    'border-red-500 focus:border-red-500': (formData.employeeId && !isValidFormat(formData.employeeId)) || idExistsError,
                    'border-[#529F2D]': isValidFormat(formData.employeeId) && !idExistsError && !isCheckingId
                  }"
                />
                
                <div *ngIf="isCheckingId" class="absolute right-3 top-1/2 -translate-y-1/2">
                    <lucide-icon [img]="icons.Loader2" class="w-4 h-4 text-[#529F2D] animate-spin"></lucide-icon>
                </div>
                
                <div *ngIf="!isCheckingId && isValidFormat(formData.employeeId) && !idExistsError" class="absolute right-3 top-1/2 -translate-y-1/2">
                    <lucide-icon [img]="icons.BadgeCheck" class="w-4 h-4 text-[#529F2D]"></lucide-icon>
                </div>
            </div>

            <p *ngIf="formData.employeeId && !isValidFormat(formData.employeeId)" class="text-xs text-red-400">
               Must start with DS or INT followed by 5 digits.
            </p>
            <p *ngIf="idExistsError" class="text-xs text-red-500 font-bold flex items-center gap-1">
               <lucide-icon [img]="icons.X" class="w-3 h-3"></lucide-icon>
               This Employee ID is already registered in the blockchain.
            </p>
          </div>

          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2">
              <lucide-icon [img]="icons.Droplets" class="w-4 h-4 text-[#707070]"></lucide-icon> 
              Blood Group <span class="text-red-500">*</span>
            </label>
            <div class="relative">
              <select name="bloodGroup" [(ngModel)]="formData.bloodGroup" required 
                class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg focus:border-[#529F2D] outline-none text-white appearance-none">
                <option value="" disabled class="bg-[#1D1C23]">Select</option>
                <option *ngFor="let bg of bloodGroups" [value]="bg" class="bg-[#1D1C23]">{{ bg }}</option>
              </select>
            </div>
          </div>

          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2">
              <lucide-icon [img]="icons.CalendarDays" class="w-4 h-4 text-[#707070]"></lucide-icon> 
              Date of Joining <span class="text-red-500">*</span>
            </label>
            <input 
              type="date" 
              name="dateOfJoining" 
              [(ngModel)]="formData.dateOfJoining" 
              [max]="maxDate"
              required 
              class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg focus:border-[#529F2D] outline-none text-white custom-date-input"
            />
            <p class="text-xs text-[#707070]">Cannot be a future date.</p>
          </div>

          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2">
              <lucide-icon [img]="icons.CalendarDays" class="w-4 h-4 text-[#707070]"></lucide-icon> 
              Issue Date
            </label>
            <input type="date" name="issueDate" [(ngModel)]="formData.issueDate" readonly 
              class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg text-white/50 cursor-not-allowed custom-date-input"/>
          </div>

        </div>

        <footer class="flex flex-col-reverse md:flex-row items-center justify-between gap-4 border-t border-white/5 pt-8 mt-10">
          <button type="button" (click)="clearForm()" 
            class="w-full md:w-auto px-8 py-3 text-sm text-[#A1A1A1] bg-[#1D1C23] rounded-lg font-medium hover:bg-[#1D1C23]/70 hover:text-white transition-colors flex items-center justify-center gap-2">
            <lucide-icon [img]="icons.X" class="w-5 h-5"></lucide-icon> Cancel
          </button>

          <button type="submit" [disabled]="!isFormValid || isLoading" 
            class="w-full md:w-auto px-10 py-3 bg-[#529F2D] hover:bg-[#62bf36] text-white font-bold text-base rounded-lg flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed">
              <span *ngIf="isLoading" class="flex items-center gap-2">
                <span class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></span> 
                Processing...
              </span>
              <span *ngIf="!isLoading">Register Employee</span>
              <lucide-icon *ngIf="!isLoading" [img]="icons.UserPlus" class="w-5 h-5"></lucide-icon>
          </button>
        </footer>

      </form>
    </main>
  </div>
</div>



<!-- <div
  class="min-h-screen text-white p-6 flex flex-col justify-center font-inter"
  [style.background]="'radial-gradient(circle at center, #535056 0%, #25242D 70%)'"
>
  <div class="max-w-6xl mx-auto w-full">
    
    <main class="bg-[#00000054] rounded-xl border border-[#3E3D45] p-8 shadow-[0px_4px_4px_0px_#00000040] animate-in zoom-in-95 duration-700 delay-100">
      
      <div class="flex items-center gap-3 mb-6 text-white border-b border-white/5 pb-5">
        <lucide-icon [img]="icons.UserPlus" class="w-7 h-7 text-[#529F2D]" [strokeWidth]="1.5"></lucide-icon>
        <h1 class="text-2xl font-bold uppercase tracking-tight">Employee Registration</h1>
      </div>

      <div *ngIf="isLoading" 
           class="mb-6 p-4 rounded-lg font-medium text-sm flex items-center gap-2 bg-[#529F2D]/10 border border-[#529F2D] text-[#529F2D]">
           <lucide-icon [img]="icons.Loader2" class="w-5 h-5 animate-spin"></lucide-icon>
           <span>{{ message }}</span>
      </div>

      <form (submit)="onSubmit()" class="space-y-8">
        
        <div class="space-y-3">
          <label class="text-[#A1A1A1] text-base font-semibold">Employee Photo <span class="text-red-500">*</span></label>
          <div class="flex flex-row items-center gap-6">
            <div class="relative w-28 h-28 shrink-0 rounded-xl border border-dashed border-[#3E3D45] flex items-center justify-center overflow-hidden bg-[#1D1C23] shadow-inner group">
              <div *ngIf="isImageLoading" class="absolute inset-0 bg-black/60 flex items-center justify-center z-10 backdrop-blur-sm">
                 <lucide-icon [img]="icons.Loader2" class="w-8 h-8 text-[#529F2D] animate-spin"></lucide-icon>
              </div>
              <img *ngIf="previewUrl; else placeholder" [src]="previewUrl" alt="Photo Preview" class="w-full h-full object-cover transition-opacity duration-300" />
              <ng-template #placeholder>
                 <lucide-icon [img]="icons.UserPlus" class="w-10 h-10 text-[#707070]" [strokeWidth]="1"></lucide-icon>
              </ng-template>
            </div>
            <div class="flex-1 w-full max-w-md">
              <input id="photoInput" type="file" name="photo" accept="image/jpeg, image/png, image/webp" (change)="onFileChange($event)"
                class="block w-full text-sm text-[#A1A1A1] file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-[#529F2D]/10 file:text-[#529F2D] hover:file:bg-[#529F2D]/20 cursor-pointer focus:ring-0 outline-none"/>
              <p class="text-xs text-[#707070] mt-2">Required. Accepted: JPEG, PNG, WEBP. Max: 5MB</p>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
          
          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2"><lucide-icon [img]="icons.UserPlus" class="w-4 h-4 text-[#707070]"></lucide-icon> Employee Name <span class="text-red-500">*</span></label>
            <input type="text" name="name" [(ngModel)]="formData.name" placeholder="e.g., Raisul Kabir" required class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg focus:border-[#529F2D] outline-none text-white transition-all"/>
          </div>

          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2"><lucide-icon [img]="icons.BadgeCheck" class="w-4 h-4 text-[#707070]"></lucide-icon> Designation <span class="text-red-500">*</span></label>
            <input type="text" name="designation" [(ngModel)]="formData.designation" placeholder="e.g., Senior Business Analyst" required class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg focus:border-[#529F2D] outline-none text-white transition-all"/>
          </div>

          <div class="space-y-2 relative">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2">
              <lucide-icon [img]="icons.ShieldCheck" class="w-4 h-4 text-[#707070]"></lucide-icon> DS ID <span class="text-red-500">*</span>
            </label>
            
            <div class="relative">
                <input
                  type="text"
                  name="employeeId"
                  [ngModel]="formData.employeeId"
                  (ngModelChange)="onIdInput($event)"
                  placeholder="DS00615 or INT12345"
                  required
                  maxlength="8"
                  class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg outline-none transition-all text-white uppercase pr-10"
                  [ngClass]="{
                    'border-red-500 focus:border-red-500': (formData.employeeId && !isValidFormat(formData.employeeId)) || idExistsError,
                    'border-[#529F2D]': isValidFormat(formData.employeeId) && !idExistsError && !isCheckingId
                  }"
                />
                
                <div *ngIf="isCheckingId" class="absolute right-3 top-1/2 -translate-y-1/2">
                    <lucide-icon [img]="icons.Loader2" class="w-4 h-4 text-[#529F2D] animate-spin"></lucide-icon>
                </div>
                
                <div *ngIf="!isCheckingId && isValidFormat(formData.employeeId) && !idExistsError" class="absolute right-3 top-1/2 -translate-y-1/2">
                    <lucide-icon [img]="icons.BadgeCheck" class="w-4 h-4 text-[#529F2D]"></lucide-icon>
                </div>
            </div>

            <p *ngIf="formData.employeeId && !isValidFormat(formData.employeeId)" class="text-xs text-red-400">
               Must start with DS or INT followed by 5 digits.
            </p>
            <p *ngIf="idExistsError" class="text-xs text-red-500 font-bold flex items-center gap-1">
               <lucide-icon [img]="icons.X" class="w-3 h-3"></lucide-icon>
               This Employee ID is already registered in the blockchain.
            </p>
          </div>
          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2"><lucide-icon [img]="icons.Droplets" class="w-4 h-4 text-[#707070]"></lucide-icon> Blood Group <span class="text-red-500">*</span></label>
            <div class="relative">
              <select name="bloodGroup" [(ngModel)]="formData.bloodGroup" required class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg focus:border-[#529F2D] outline-none text-white appearance-none">
                <option value="" disabled class="bg-[#1D1C23]">Select</option>
                <option *ngFor="let bg of bloodGroups" [value]="bg" class="bg-[#1D1C23]">{{ bg }}</option>
              </select>
            </div>
          </div>

          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2"><lucide-icon [img]="icons.CalendarDays" class="w-4 h-4 text-[#707070]"></lucide-icon> Date of Joining <span class="text-red-500">*</span></label>
            <input type="date" name="dateOfJoining" [(ngModel)]="formData.dateOfJoining" required class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg focus:border-[#529F2D] outline-none text-white custom-date-input"/>
          </div>

          <div class="space-y-2">
            <label class="text-[#A1A1A1] text-sm font-medium flex items-center gap-2"><lucide-icon [img]="icons.CalendarDays" class="w-4 h-4 text-[#707070]"></lucide-icon> Issue Date</label>
            <input type="date" name="issueDate" [(ngModel)]="formData.issueDate" readonly class="w-full px-4 py-3 bg-[#00000033] border border-[#3E3D45] rounded-lg text-white/50 cursor-not-allowed custom-date-input"/>
          </div>

        </div>

        <footer class="flex flex-col-reverse md:flex-row items-center justify-between gap-4 border-t border-white/5 pt-8 mt-10">
          <button type="button" (click)="clearForm()" class="w-full md:w-auto px-8 py-3 text-sm text-[#A1A1A1] bg-[#1D1C23] rounded-lg font-medium hover:bg-[#1D1C23]/70 hover:text-white transition-colors flex items-center justify-center gap-2">
            <lucide-icon [img]="icons.X" class="w-5 h-5"></lucide-icon> Cancel
          </button>

          <button type="submit" [disabled]="!isFormValid || isLoading" class="w-full md:w-auto px-10 py-3 bg-[#529F2D] hover:bg-[#62bf36] text-white font-bold text-base rounded-lg flex items-center justify-center gap-2 shadow-lg transition-transform active:scale-95 disabled:opacity-30 disabled:cursor-not-allowed">
              <span *ngIf="isLoading" class="flex items-center gap-2"><span class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></span> Processing...</span>
              <span *ngIf="!isLoading">Register Employee</span>
              <lucide-icon *ngIf="!isLoading" [img]="icons.UserPlus" class="w-5 h-5"></lucide-icon>
          </button>
        </footer>

      </form>
    </main>
  </div>
</div> -->
